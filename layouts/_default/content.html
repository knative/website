<div class="td-content">
  <h1>{{ .Title }}</h1>
  {{ with .Params.description }}<div class="lead">{{ . | markdownify }}</div>{{ end }}
  {{ $out := .Content}}
  {{ if not ( in (slice "README.md" "_index.md") .File.LogicalName ) }}
    <!-- non-README.md files will be rendered one level below normal, fix links in them -->
    {{ $out = $out | replaceRE "href=\"\\.\\./" "href=\"../../" }}
    {{ $out = $out | replaceRE "href=\"\\./" "href=\"../"}}
  {{ end }}
  <!-- For SEO and aesthetics purposes, clean up GitHub URLs; this is
       repeating the hugo "Pretty URLs" pattern on _relative_ links in the
       source material.

       The regexp ([^:\"]*(/[^\"]*)?) matches:
       - Zero or more non-: or " charaters (: is needed for an absolute URL)
       - Followed by a "/" and zero or more non " characters
         (which would end the href attribute)
       -->
  {{ $out = $out | replaceRE "href=\"([^:\"]*(/[^\"]*)?)\\.md\"" "href=\"$1\""}}
  {{ $out = $out | replaceRE "href=\"([^:\"]*(/[^\"]*)?)README\"" "href=\"$1\"" }}
  {{ $out | safeHTML}}
  {{ if (and (not .Params.hide_feedback) (.Site.Params.ui.feedback.enable) (.Site.GoogleAnalytics)) }}
    {{ partial "feedback.html" .Site.Params.ui.feedback }}
    <br />
  {{ end }}
  {{ if (.Site.DisqusShortname) }}
    <br />
    {{ partial "disqus-comment.html" . }}
  {{ end }}
  <!-- Temporarily hide last mod date until we get it to work -->
  <!-- <div class="text-muted mt-5 pt-3 border-top">{{ partial "page-meta-lastmod.html" . }}</div> -->
</div>
